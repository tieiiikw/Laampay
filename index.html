<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8">  
  <title>LaamPay ‚Äî ETB Wallet</title>  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>  
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>  
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>    
  <style>  
  * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }  
    
  body {  
    margin: 0;  
    background: linear-gradient(135deg, #007bff, #00d4ff);  
    color: #fff;  
    display: flex;  
    justify-content: center;  
    align-items: flex-start;  
    min-height: 100vh;  
    padding: 20px;  
  }  

  .container {  
    background: rgba(255, 255, 255, 0.15);  
    backdrop-filter: blur(15px);  
    border-radius: 20px;  
    padding: 25px;  
    width: 100%;  
    max-width: 400px;  
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);  
    animation: fadeIn 0.6s ease;  
    position: relative;  
  }  

  h2 { text-align: center; font-size: 1.8em; margin-bottom: 10px; }  
  h3 { text-align: center; font-size: 1.2em; margin-top: 15px; }  

  .balance-card {  
    text-align: center;  
    margin-bottom: 15px;  
    padding: 15px;  
    background: rgba(255,255,255,0.2);  
    border-radius: 10px;  
  }  

  .action-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
  }

  .action-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .action-btn.active {
    background: #00ffb3;
    color: #003344;
  }

  .action-btn:hover:not(.active) {
    background: rgba(255, 255, 255, 0.3);
  }

  .form-section {
    background: rgba(255,255,255,0.15);
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    animation: slideDown 0.3s ease;
  }

  .form-group {
    margin-bottom: 15px;
  }

  .form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
  }

  input, button, select, textarea {  
    width: 100%;  
    padding: 12px;  
    margin: 8px 0;  
    border: none;  
    border-radius: 10px;  
    font-size: 15px;  
    outline: none;  
  }  

  input, select, textarea {  
    background: rgba(255, 255, 255, 0.25);  
    color: #fff;  
  }  

  input::placeholder, textarea::placeholder { color: #eee; }  

  button {  
    background: #00ffb3;  
    color: #003344;  
    font-weight: bold;  
    cursor: pointer;  
    transition: all 0.3s;  
  }  

  button:hover { background: #00ffaa; }  

  button.secondary {  
    background: rgba(255, 255, 255, 0.25);  
    color: #fff;  
  }  

  button.secondary:hover {  
    background: rgba(255, 255, 255, 0.35);  
  }  

  button.danger {  
    background: #ff5252;  
    color: #fff;  
  }  

  button.danger:hover {  
    background: #ff3838;  
  }  

  .hidden { display: none; }  

  .tx-item {  
    background: rgba(255,255,255,0.1);  
    padding: 12px;  
    border-radius: 10px;  
    margin: 8px 0;  
    font-size: 14px;  
    border-left: 4px solid #00ffb3;  
  }  

  .tx-item.received {
    border-left-color: #007bff;
  }

  .tx-item.pending {
    border-left-color: #ffb300;
  }

  .status-message {
    text-align: center;
    margin-top: 8px;
    padding: 8px;
    border-radius: 5px;
    font-size: 14px;
  }

  .status-success {
    background: rgba(0, 255, 179, 0.2);
    color: #00ffb3;
  }

  .status-error {
    background: rgba(255, 82, 82, 0.2);
    color: #ff5252;
  }

  .settings-btn {  
    position: absolute;  
    top: 20px;  
    right: 20px;  
    background: rgba(255, 255, 255, 0.2);  
    border: none;  
    border-radius: 50%;  
    width: 40px;  
    height: 40px;  
    display: flex;  
    justify-content: center;  
    align-items: center;  
    cursor: pointer;  
    color: #fff;  
    font-size: 18px;  
  }  

  .features {  
    margin-top: 30px;  
    display: grid;  
    grid-template-columns: repeat(2, 1fr);  
    gap: 15px;  
  }  

  .feature {  
    background: rgba(255, 255, 255, 0.1);  
    padding: 15px;  
    border-radius: 10px;  
    text-align: center;  
  }  

  .feature i {  
    font-size: 1.5rem;  
    margin-bottom: 10px;  
    color: #00ffb3;  
  }  


  .modal-content {  
    background: rgba(255, 255, 255, 0.15);  
    backdrop-filter: blur(15px);  
    border-radius: 20px;  
    padding: 25px;  
    width: 90%;  
    max-width: 400px;  
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);  
    animation: fadeIn 0.6s ease;  
  }  

  .modal-header {  
    display: flex;  
    justify-content: space-between;  
    align-items: center;  
    margin-bottom: 15px;  
  }  

  .close-modal {  
    background: none;  
    border: none;  
    color: #fff;  
    font-size: 24px;  
    cursor: pointer;  
  }  

  .auth-buttons {  
    display: flex;  
    gap: 10px;  
    margin-bottom: 20px;  
  }  

  .auth-btn {  
    flex: 1;  
    padding: 15px;  
    border: none;  
    border-radius: 10px;  
    background: rgba(255, 255, 255, 0.2);  
    color: white;  
    font-size: 1.1rem;  
    font-weight: 600;  
    cursor: pointer;  
    transition: all 0.3s ease;  
  }  

  .auth-btn.active {  
    background: #00ffb3;  
    color: #003344;  
  }  

  .auth-btn:hover:not(.active) {  
    background: rgba(255, 255, 255, 0.3);  
  }  

  .form-container {  
    overflow: hidden;  
  }  

  .input-group {  
    margin-bottom: 20px;  
  }  

  .input-group label {  
    display: block;  
    margin-bottom: 8px;  
    font-weight: 500;  
  }  

  @keyframes fadeIn {  
    from { opacity: 0; transform: translateY(15px); }  
    to { opacity: 1; transform: translateY(0); }  
  }  

  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 480px) {  
    .container {  
      padding: 20px;  
    }  

    .features {  
      grid-template-columns: 1fr;  
    }  
  }  
  </style>  
</head>  
<body>  
  <!-- AUTH SECTION -->
  <div class="container" id="authSection">
    <div class="logo">
      <h1>üí∏ LaamPay</h1>
      <p>Your Secure ETB Wallet</p>
    </div>
    
    <div class="auth-buttons">
      <button class="auth-btn active" id="registerBtn">Register</button>
      <button class="auth-btn" id="loginBtn">Login</button>
    </div>
    
    <div class="form-container">
      <!-- REGISTER FORM -->
      <div class="form" id="registerForm">
        <div class="input-group">
          <label for="regUsername">Username</label>
          <input type="text" id="regUsername" placeholder="Enter your username">
        </div>
        
        <div class="input-group">
          <label for="regEmail">Email</label>
          <input type="email" id="regEmail" placeholder="Enter your email">
        </div>
        
        <div class="input-group">
          <label for="regPhone">Phone Number</label>
          <input type="tel" id="regPhone" placeholder="Enter your phone number">
        </div>
        
        <div class="input-group">
          <label for="regPassword">Password</label>
          <input type="password" id="regPassword" placeholder="Create a password">
        </div>
        
        <button class="submit-btn" id="btnRegister">Create Account</button>
      </div>
      
      <!-- LOGIN FORM -->
      <div class="form hidden" id="loginForm">
        <div class="input-group">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" placeholder="Enter your email">
        </div>
        
        <div class="input-group">
          <label for="loginPassword">Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password">
        </div>
        
        <button class="submit-btn" id="btnLogin">Sign In</button>
      </div>
    </div>
    
    <div class="features">
      <div class="feature">
        <i class="fas fa-shield-alt"></i>
        <h3>Secure</h3>
        <p>Bank-level security</p>
      </div>
      <div class="feature">
        <i class="fas fa-bolt"></i>
        <h3>Fast</h3>
        <p>Instant transactions</p>
      </div>
      <div class="feature">
        <i class="fas fa-globe"></i>
        <h3>Global</h3>
        <p>Send money anywhere</p>
      </div>
      <div class="feature">
        <i class="fas fa-headset"></i>
        <h3>Support</h3>
        <p>24/7 customer service</p>
      </div>
    </div>
  </div>

<!-- WALLET SECTION -->  
  <div class="container hidden" id="walletSection">  
    <button class="settings-btn" id="btnSettings">‚öôÔ∏è</button>
    
    <h3>Welcome, <span id="userName"></span></h3>  

    <div class="balance-card">  
      <p>Current Balance</p>  
      <h2><span id="userBalance">0.00</span> ETB</h2>  
      <button id="btnRefresh">üîÑ Refresh</button>  
    </div>  

    <div class="action-buttons">
      <button class="action-btn active" id="toggleSend">Send Money</button>
      <button class="action-btn" id="toggleRequest">Request Money</button>
    </div>

    <!-- SEND FORM -->
    <div id="sendForm" class="form-section">
      <div class="form-group">
        <label for="sendTo">Send to (Username/Email/Phone)</label>
        <input type="text" id="sendTo" placeholder="Enter recipient details">
      </div>
      <div class="form-group">
        <label for="sendAmount">Amount (ETB)</label>
        <input type="number" id="sendAmount" placeholder="Enter amount">
      </div>
      <button id="btnSend">Send Money</button>
      <div id="sendStatus" class="status-message"></div>
    </div>

    <!-- REQUEST FORM -->
    <div id="requestForm" class="form-section hidden">
      <div class="form-group">
        <label for="requestFrom">Request from (Username/Email/Phone)</label>
        <input type="text" id="requestFrom" placeholder="Enter user details">
      </div>
      <div class="form-group">
        <label for="requestAmount">Amount (ETB)</label>
        <input type="number" id="requestAmount" placeholder="Enter amount">
      </div>
      <div class="form-group">
        <label for="requestNote">Note (Optional)</label>
        <textarea id="requestNote" placeholder="Add a note" rows="2"></textarea>
      </div>
      <button id="btnRequest">Send Request</button>
      <div id="requestStatus" class="status-message"></div>
    </div>

    <hr style="border-color: rgba(255,255,255,0.2); margin:15px 0;">  
    <h4>Transaction History</h4>  
    <div id="txList"></div>  

    <div style="margin-top:15px;">
      <button id="btnLogout" class="danger">Logout</button>
    </div>
  </div>

  <!-- SETTINGS MODAL -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h5>Settings</h5>
        <button class="close-modal" id="closeSettings">√ó</button>
      </div>

      <div class="form-group">
        <h4>Profile Information</h4>
        <input id="profileUsername" placeholder="Username">
        <input id="profileEmail" placeholder="Email" disabled>
        <input id="profilePhone" placeholder="Phone Number">
        <button id="btnUpdateProfile">Update Profile</button>
        <div id="profileStatus" class="status-message"></div>
      </div>

      <hr style="border-color: rgba(255,255,255,0.2); margin:15px 0;">

      <div class="form-group">
        <h5>KYC Verification</h5>
        <p style="font-size: 14px; margin-bottom: 15px;">Complete your KYC to unlock all features</p>
        <select id="kycDocumentType">
          <option value="">Select Document Type</option>
          <option value="national_id">National ID</option>
          <option value="passport">Passport</option>
          <option value="driving_license">Driving License</option>
        </select>
        <input id="kycDocumentNumber" placeholder="Document Number">
        <input id="kycFullName" placeholder="Full Name (as on document)">
        <input id="kycDateOfBirth" type="date" placeholder="Date of Birth">
        <textarea id="kycAddress" placeholder="Address" rows="3"></textarea>
        <button id="btnSubmitKYC">Submit KYC</button>
        <div id="kycStatus" class="status-message"></div>
      </div>
    </div>
  </div>

  <script>  
    // --- Firebase Config ---  
    const firebaseConfig = {  
      apiKey: "AIzaSyC1Vwy0v0DT0xJvJL2frTw-ol8sfZQX3hI",  
      authDomain: "laampay-71a0e.firebaseapp.com",  
      projectId: "laampay-71a0e",  
      storageBucket: "laampay-71a0e.firebasestorage.app",  
      messagingSenderId: "280848370047",  
      appId: "1:280848370047:web:0b0066863b7bd0d564324a",  
      measurementId: "G-B833BYL4L6"  
    };  

    firebase.initializeApp(firebaseConfig);  
    const auth = firebase.auth();  
    const db = firebase.firestore();  

    const authSection = document.getElementById('authSection');  
    const walletSection = document.getElementById('walletSection');  
    const userName = document.getElementById('userName');  
    const userBalance = document.getElementById('userBalance');  
    const txList = document.getElementById('txList');  
    const sendStatus = document.getElementById('sendStatus');  
    let currentUser = null;  

    // Auth Forms Toggle
    document.getElementById('registerBtn').addEventListener('click', () => {
      document.getElementById('registerBtn').classList.add('active');
      document.getElementById('loginBtn').classList.remove('active');
      document.getElementById('registerForm').classList.remove('hidden');
      document.getElementById('loginForm').classList.add('hidden');
    });

    document.getElementById('loginBtn').addEventListener('click', () => {
      document.getElementById('loginBtn').classList.add('active');
      document.getElementById('registerBtn').classList.remove('active');
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('registerForm').classList.add('hidden');
    });

    // Send/Request Forms Toggle
    document.getElementById('toggleSend').addEventListener('click', () => {
      document.getElementById('toggleSend').classList.add('active');
      document.getElementById('toggleRequest').classList.remove('active');
      document.getElementById('sendForm').classList.remove('hidden');
      document.getElementById('requestForm').classList.add('hidden');
    });

    document.getElementById('toggleRequest').addEventListener('click', () => {
      document.getElementById('toggleRequest').classList.add('active');
      document.getElementById('toggleSend').classList.remove('active');
      document.getElementById('requestForm').classList.remove('hidden');
      document.getElementById('sendForm').classList.add('hidden');
    });

    // Register
    document.getElementById('btnRegister').onclick = async () => {
      const username = document.getElementById('regUsername').value.trim();
      const email = document.getElementById('regEmail').value.trim();
      const phone = document.getElementById('regPhone').value.trim();
      const password = document.getElementById('regPassword').value.trim();

      if (!username || !email || !password) return alert("Please fill all fields");
      try {
        const cred = await auth.createUserWithEmailAndPassword(email, password);
        const uid = cred.user.uid;
        await db.collection("users").doc(uid).set({
          username, email, phone, balance: 1000, createdAt: Date.now()
        });
        alert("Account created! Default balance: 1000 ETB");
      } catch (err) {
        alert(err.message);
      }
    };

    // Login
    document.getElementById('btnLogin').onclick = async () => {
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value.trim();
      try {
        await auth.signInWithEmailAndPassword(email, password);
      } catch (err) {
        alert(err.message);
      }
    };

    // Auth state
    auth.onAuthStateChanged(async user => {
      if (user) {
        currentUser = user;
        authSection.classList.add("hidden");
        walletSection.classList.remove("hidden");
        loadWallet();
        loadProfileData();
      } else {
        walletSection.classList.add("hidden");
        authSection.classList.remove("hidden");
      }
    });

    async function loadWallet() {  
      const doc = await db.collection("users").doc(currentUser.uid).get();  
      if (!doc.exists) return alert("No wallet found!");  
      const data = doc.data();  
      userName.innerText = data.username || data.email;  
      userBalance.innerText = (data.balance || 0).toFixed(2);  
      loadTransactions();  
    }  

    // Load profile data for settings
    async function loadProfileData() {
      const doc = await db.collection("users").doc(currentUser.uid).get();
      if (doc.exists) {
        const data = doc.data();
        document.getElementById('profileUsername').value = data.username || '';
        document.getElementById('profileEmail').value = data.email || '';
        document.getElementById('profilePhone').value = data.phone || '';
      }
    }

    document.getElementById('btnRefresh').onclick = loadWallet;  

    // Send Money
    document.getElementById('btnSend').onclick = async () => {
      const to = document.getElementById('sendTo').value.trim();
      const amount = parseFloat(document.getElementById('sendAmount').value.trim());
      
      if (!to || isNaN(amount) || amount <= 0) {
        sendStatus.innerText = "‚ùå Please enter valid amount and recipient";
        sendStatus.className = "status-message status-error";
        return;
      }

      const senderRef = db.collection("users").doc(currentUser.uid);
      const senderDoc = await senderRef.get();
      const senderData = senderDoc.data();

      let recipientDoc;
      for (let field of ["username","email","phone"]) {
        const snap = await db.collection("users").where(field,"==",to).get();
        if (!snap.empty) { recipientDoc = snap.docs[0]; break; }
      }
      
      if (!recipientDoc) {
        sendStatus.innerText = "‚ùå Recipient not found";
        sendStatus.className = "status-message status-error";
        return;
      }
      
      const recipientId = recipientDoc.id;
      const recipientData = recipientDoc.data();
      
      if (recipientId === currentUser.uid) {
        sendStatus.innerText = "‚ùå Cannot send to yourself";
        sendStatus.className = "status-message status-error";
        return;
      }
      
      if ((senderData.balance || 0) < amount) {
        sendStatus.innerText = "‚ùå Insufficient funds";
        sendStatus.className = "status-message status-error";
        return;
      }

      try {
        await db.runTransaction(async (tx) => {
          const senderSnap = await tx.get(senderRef);
          const recSnap = await tx.get(db.collection("users").doc(recipientId));
          const newSenderBal = (senderSnap.data().balance || 0) - amount;
          const newRecBal = (recSnap.data().balance || 0) + amount;
          tx.update(senderRef, { balance: newSenderBal });
          tx.update(db.collection("users").doc(recipientId), { balance: newRecBal });
          
          // Create transaction record
          const txData = {
            fromUserId: currentUser.uid,
            fromUsername: senderData.username,
            toUserId: recipientId,
            toUsername: recipientData.username,
            amount,
            timestamp: Date.now(),
            type: 'transfer'
          };
          tx.set(db.collection("transactions").doc(), txData);
        });
        
        sendStatus.innerText = "‚úÖ Transaction successful!";
        sendStatus.className = "status-message status-success";
        document.getElementById('sendAmount').value = "";
        document.getElementById('sendTo').value = "";
        loadWallet();
      } catch (e) {
        sendStatus.innerText = "‚ùå Failed: " + e.message;
        sendStatus.className = "status-message status-error";
      }
    };

    // Request Money
    document.getElementById('btnRequest').onclick = async () => {
      const from = document.getElementById('requestFrom').value.trim();
      const amount = parseFloat(document.getElementById('requestAmount').value.trim());
      const note = document.getElementById('requestNote').value.trim();
      
      if (!from || isNaN(amount) || amount <= 0) {
        requestStatus.innerText = "‚ùå Please enter valid amount and user";
        requestStatus.className = "status-message status-error";
        return;
      }
      
      let requesterDoc;
      for (let field of ["username","email","phone"]) {
        const snap = await db.collection("users").where(field,"==",from).get();
        if (!snap.empty) { requesterDoc = snap.docs[0]; break; }
      }
      
      if (!requesterDoc) {
        requestStatus.innerText = "‚ùå User not found";
        requestStatus.className = "status-message status-error";
        return;
      }
      
      const requesterId = requesterDoc.id;
      const requesterData = requesterDoc.data();
      
      if (requesterId === currentUser.uid) {
        requestStatus.innerText = "‚ùå Cannot request from yourself";
        requestStatus.className = "status-message status-error";
        return;
      }

      try {
        await db.collection("moneyRequests").add({
          fromUserId: currentUser.uid,
          fromUsername: userName.innerText,
          toUserId: requesterId,
          toUsername: requesterData.username,
          amount,
          note,
          status: 'pending',
          timestamp: Date.now()
        });
        
        requestStatus.innerText = "‚úÖ Money request sent!";
        requestStatus.className = "status-message status-success";
        document.getElementById('requestAmount').value = "";
        document.getElementById('requestFrom').value = "";
        document.getElementById('requestNote').value = "";
      } catch (e) {
        requestStatus.innerText = "‚ùå Failed: " + e.message;
        requestStatus.className = "status-message status-error";
      }
    };

    // Load Transactions (both sent and received)
    async function loadTransactions() {
      // Get sent transactions
      const sentSnap = await db.collection("transactions")
        .where("fromUserId", "==", currentUser.uid)
        .orderBy("timestamp", "desc")
        .limit(10)
        .get();
      
      // Get received transactions  
      const receivedSnap = await db.collection("transactions")
        .where("toUserId", "==", currentUser.uid)
        .orderBy("timestamp", "desc")
        .limit(10)
        .get();

      txList.innerHTML = "";
      
      if (sentSnap.empty && receivedSnap.empty) {
        txList.innerHTML = "<div class='tx-item'>No transactions yet</div>";
        return;
      }
      
      // Combine and sort all transactions
      let allTransactions = [];
      
      sentSnap.forEach(doc => {
        const data = doc.data();
        allTransactions.push({
          ...data,
          id: doc.id,
          direction: 'sent'
        });
      });
      
      receivedSnap.forEach(doc => {
        const data = doc.data();
        allTransactions.push({
          ...data,
          id: doc.id,
          direction: 'received'
        });
      });
      
      // Sort by timestamp
      allTransactions.sort((a, b) => b.timestamp - a.timestamp);
      
      // Display transactions
      allTransactions.forEach(tx => {
        const time = new Date(tx.timestamp).toLocaleString();
        const emoji = tx.direction === 'sent' ? 'üì§' : 'üì•';
        const amountColor = tx.direction === 'sent' ? '#ff5252' : '#00ffb3';
        const amountSign = tx.direction === 'sent' ? '-' : '+';
        
        txList.innerHTML += `
          <div class='tx-item ${tx.direction}'>
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                ${emoji} ${tx.direction === 'sent' ? 'To: ' + tx.toUsername : 'From: ' + tx.fromUsername}
                <br><small>${time}</small>
              </div>
              <div style="color: ${amountColor}; font-weight: bold;">
                ${amountSign}${tx.amount} ETB
              </div>
            </div>
          </div>
        `;
      });
    }

    // Logout  
    document.getElementById('btnLogout').onclick = () => auth.signOut(); 

    // Settings Modal
    document.getElementById('btnSettings').onclick = () => {
      document.getElementById('settingsModal').classList.remove('hidden');
    };

    document.getElementById('closeSettings').onclick = () => {
      document.getElementById('settingsModal').classList.add('hidden');
    };

    // Update Profile
    document.getElementById('btnUpdateProfile').onclick = async () => {
      const username = document.getElementById('profileUsername').value.trim();
      const phone = document.getElementById('profilePhone').value.trim();
      
      if (!username) {
        profileStatus.innerText = "‚ùå Username is required";
        profileStatus.className = "status-message status-error";
        return;
      }
      
      try {
        await db.collection("users").doc(currentUser.uid).update({
          username,
          phone
        });
        
        profileStatus.innerText = "‚úÖ Profile updated successfully!";
        profileStatus.className = "status-message status-success";
        loadWallet(); // Refresh to show updated username
      } catch (e) {
        profileStatus.innerText = "‚ùå Failed: " + e.message;
        profileStatus.className = "status-message status-error";
      }
    };

    // Submit KYC
    document.getElementById('btnSubmitKYC').onclick = async () => {
      const documentType = document.getElementById('kycDocumentType').value;
      const documentNumber = document.getElementById('kycDocumentNumber').value.trim();
      const fullName = document.getElementById('kycFullName').value.trim();
      const dateOfBirth = document.getElementById('kycDateOfBirth').value;
      const address = document.getElementById('kycAddress').value.trim();
      
      if (!documentType || !documentNumber || !fullName || !dateOfBirth || !address) {
        kycStatus.innerText = "‚ùå Please fill all KYC fields";
        kycStatus.className = "status-message status-error";
        return;
      }
      
      try {
        await db.collection("users").doc(currentUser.uid).update({
          kyc: {
            documentType,
            documentNumber,
            fullName,
            dateOfBirth,
            address,
            submittedAt: Date.now(),
            status: 'pending'
          }
        });
        
        kycStatus.innerText = "‚úÖ KYC submitted successfully!";
        kycStatus.className = "status-message status-success";
      } catch (e) {
        kycStatus.innerText = "‚ùå Failed: " + e.message;
        kycStatus.className = "status-message status-error";
      }
    };
// Hide settings button and modal by default
btnSettings.classList.add('hidden');
settingsModal.classList.add('hidden');




  </script>  
</body>  
</html>